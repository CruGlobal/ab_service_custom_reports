<%- include('/app/reports/templates/stylesheets') %>
    <style>
        body {
            overflow: auto;
        }

        select.selector {
            font-size: 24px;
            color: gray;
            border: 1px solid #CCC;
        }

        tr.tertiary-total,
        tr.tertiary-total:hover {
            background: #949494;
            color: white;
        }

        tr.secondary-total,
        tr.secondary-total:hover {
            background: #6a6a6a;
            color: white;
        }

        tr.total {
            background: #2a2a2a;
            color: white;
        }
    </style>

    <script type="text/javascript">
        document.title = "<%= title[languageCode] %>";

        function refresh() {
            const rootDoc = window.parent.document;
            const iFrame = rootDoc.querySelector("iframe#balance-sheet");
            if (iFrame) {
                const loadingElem = document.createElement("div");
                loadingElem.id = "balance-sheet-loading";
                loadingElem.innerHTML = "<div class='webix_progress_top' role='progressbar' aria-valuemin='0' aria-valuemax='100' tabindex='0' style='color: #fff; height: 20px;'><div class='webix_progress_state' style='transition-duration: 10s; width: 0%; height: 100%;'> Loading...</div></div>";
                iFrame.parentElement.insertAdjacentElement("beforeBegin", loadingElem);
                iFrame.addEventListener("load", function() {
                    loadingElem.remove();
                }, { once: true });

                setTimeout(function() {
                    loadingElem.querySelector(".webix_progress_state").style.width = "100%";
                }, 1);
            }

            var fyVal = document.getElementById("fySelect").value;
            window.location.href = `/report/balance-sheet?fyper=${fyVal}`;
        }
    </script>

    <center>
        <h1>
            <%= title[languageCode] %>
        </h1>
        <h2>
            <span style="font-weight: normal;">
                FY Period:
            </span>
            <select class="selector" id="fySelect" onchange="refresh()">
                <% for(var i=0; i < fyOptions.length; i++) { %>
                    <option <% if (fyPeriod==fyOptions[i]) { %> selected <% } %> value="<%= fyOptions[i] %>"><%=
                                    fyOptions[i] %>
                    </option>
                    <% } %>
            </select>
        </h2>
    </center>
    <div>
        <table width="100%">
            <!-- Header -->
            <tr class="sub header">
                <td>Balance Sheet</td>
                <td align="right"></td>
            </tr>
            <!-- Data -->
            <% for(var i=0; i < items.length; i++) { %>
                <tr class="<%= items[i].type || '' %>">
                    <td>
                        <%= items[i].title || "" %>
                    </td>
                    <% if (items[i].value !=null) { %>
                        <td align="right">
                            <%= fnValueFormat(typeof items[i].value=="function" ? items[i].value(items) :
                                items[i].value) %>
                        </td>
                        <% } else { %>
                            <td></td>
                            <% } %>
                </tr>
                <% } %>
        </table>
    </div>